<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catálogo de Acordes para Violão</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        header {
            background-color: #2c3e50;
            color: white;
            padding: 15px 0;
            text-align: center;
            margin-bottom: 30px;
            border-radius: 5px;
        }
        main {
            max-width: 900px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        section {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        .controls {
            margin-bottom: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
        }
        .controls label {
            font-weight: bold;
        }
        .controls select, .controls button {
            padding: 8px 12px;
            border-radius: 4px;
            border: 1px solid #ddd;
            font-size: 16px;
        }
        .controls button {
            background-color: #3498db;
            color: white;
            cursor: pointer;
            border: none;
            transition: background-color 0.3s;
        }
        .controls button:hover {
            background-color: #2980b9;
        }
        #detalhesAcordeCompleto {
            border: 1px solid #ddd;
            padding: 20px;
            border-radius: 8px;
            background-color: #f9f9f9;
            margin-top: 20px;
        }
        #detalhesAcordeCompleto h3 {
            margin-top: 0;
            color: #2c3e50;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        #detalhesAcordeCompleto p {
            margin: 10px 0;
        }
        #detalhesAcordeCompleto strong {
            color: #2c3e50;
        }
        code {
            background-color: #eef;
            padding: 2px 5px;
            border-radius: 3px;
            font-family: monospace;
        }
        .table-container {
            overflow-x: auto;
            margin-top: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        table th, table td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: center;
        }
        table th {
            background-color: #f2f2f2;
            font-weight: bold;
        }
        table td.header-cell {
            background-color: #f2f2f2;
            font-weight: bold;
            text-align: left;
        }
        .acorde-lookup-area {
            margin-top: 30px;
        }
        footer {
            text-align: center;
            padding: 20px;
            margin-top: 30px;
            color: #7f8c8d;
            font-size: 0.9em;
        }
        #diagramaAcordeContainer {
            margin: 25px auto;
            width: 100%;
            max-width: 300px;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .diagrama-titulo {
            text-align: center;
            font-weight: bold;
            margin-bottom: 15px;
            color: #2c3e50;
        }
        .diagrama-svg {
            display: block;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <header>
        <h1>Catálogo Completo de Acordes para Violão</h1>
    </header>

    <main>
        <section class="acorde-lookup-area">
            <h2>Buscar Acorde</h2>
            <div class="controls">
                <label for="tomAcordeLookup">Tom:</label>
                <select id="tomAcordeLookup"></select>

                <label for="qualidadeAcordeLookup">Qualidade:</label>
                <select id="qualidadeAcordeLookup"></select>

                <label for="formaAcordeLookup">Forma CAGED:</label>
                <select id="formaAcordeLookup"></select>

                <button id="buscarAcordeCompleto">Buscar Acorde</button>
            </div>
            <div id="detalhesAcordeCompleto">
                <p>Selecione um tom, qualidade e forma para visualizar o acorde.</p>
                <div id="diagramaAcordeContainer"></div>
            </div>
        </section>

        <section class="table-area">
            <h2>Tabela de Referência (Formas CAGED)</h2>
            <div class="table-container">
                <table id="tabelaDesenhosIDs">
                    <thead>
                        <tr>
                            <th>Qualidade \ Forma</th>
                            <th>C</th>
                            <th>A</th>
                            <th>G</th>
                            <th>E</th>
                            <th>D</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2023 Catálogo de Acordes para Violão</p>
    </footer>

    <script>
        // Estrutura de dados para os desenhos de acordes
        const desenhosAcordes = [
            // Maior (IDs 1-5)
            {
                id: 1,
                qualidade: "Maior",
                forma_caged: "C",
                desenho_string: "x32010",
                notas_base: ["C", "E", "G"],
                intervalos: ["1", "3M", "5J"],
                dicas: "Dedo 3 na 5ª corda (casa 3), Dedo 2 na 4ª corda (casa 2), Dedo 1 na 2ª corda (casa 1). Não tocar a 6ª corda.",
                casa_pestana_base: 0
            },
            {
                id: 2,
                qualidade: "Maior",
                forma_caged: "A",
                desenho_string: "x02220",
                notas_base: ["A", "C#", "E"],
                intervalos: ["1", "3M", "5J"],
                dicas: "Dedos 2, 3 e 4 nas cordas 4, 3 e 2 (casa 2). Cuidado para não abafar a 1ª corda.",
                casa_pestana_base: 0
            },
            {
                id: 3,
                qualidade: "Maior",
                forma_caged: "G",
                desenho_string: "320003",
                notas_base: ["G", "B", "D"],
                intervalos: ["1", "3M", "5J"],
                dicas: "Dedo 3 na 6ª corda (casa 3), Dedo 2 na 5ª corda (casa 2), Dedo 4 na 1ª corda (casa 3).",
                casa_pestana_base: 0
            },
            {
                id: 4,
                qualidade: "Maior",
                forma_caged: "E",
                desenho_string: "022100",
                notas_base: ["E", "G#", "B"],
                intervalos: ["1", "3M", "5J"],
                dicas: "Dedo 2 na 5ª corda (casa 2), Dedo 3 na 4ª corda (casa 2), Dedo 1 na 3ª corda (casa 1).",
                casa_pestana_base: 0
            },
            {
                id: 5,
                qualidade: "Maior",
                forma_caged: "D",
                desenho_string: "xx0232",
                notas_base: ["D", "F#", "A"],
                intervalos: ["1", "3M", "5J"],
                dicas: "Não tocar as cordas 5 e 6. Dedo 1 na 3ª corda (casa 2), Dedo 3 na 2ª corda (casa 3), Dedo 2 na 1ª corda (casa 2).",
                casa_pestana_base: 0
            },

            // Menor (IDs 6-10)
            {
                id: 6,
                qualidade: "Menor",
                forma_caged: "C",
                desenho_string: "x35543",
                notas_base: ["C", "Eb", "G"],
                intervalos: ["1", "3m", "5J"],
                dicas: "Pestana com dedo 1 na casa 3 (corda 5). Formato da forma Am.",
                casa_pestana_base: 3
            },
            {
                id: 7,
                qualidade: "Menor",
                forma_caged: "A",
                desenho_string: "x02210",
                notas_base: ["A", "C", "E"],
                intervalos: ["1", "3m", "5J"],
                dicas: "Dedo 2 na 4ª corda (casa 2), Dedo 3 na 3ª corda (casa 2), Dedo 1 na 2ª corda (casa 1).",
                casa_pestana_base: 0
            },
            {
                id: 8,
                qualidade: "Menor",
                forma_caged: "G",
                desenho_string: "355333",
                notas_base: ["G", "Bb", "D"],
                intervalos: ["1", "3m", "5J"],
                dicas: "Pestana na casa 3. Formato da forma Em.",
                casa_pestana_base: 3
            },
            {
                id: 9,
                qualidade: "Menor",
                forma_caged: "E",
                desenho_string: "022000",
                notas_base: ["E", "G", "B"],
                intervalos: ["1", "3m", "5J"],
                dicas: "Dedo 2 na 5ª corda (casa 2), Dedo 3 na 4ª corda (casa 2). Cordas 1, 2, 3 e 6 soltas.",
                casa_pestana_base: 0
            },
            {
                id: 10,
                qualidade: "Menor",
                forma_caged: "D",
                desenho_string: "xx0231",
                notas_base: ["D", "F", "A"],
                intervalos: ["1", "3m", "5J"],
                dicas: "Não tocar cordas 5 e 6. Dedo 1 na 1ª corda (casa 1), Dedo 2 na 3ª corda (casa 2), Dedo 3 na 2ª corda (casa 3).",
                casa_pestana_base: 0
            }
        ];

        // Listas de referência
        const QUALIDADES_ORDEM = ["Maior", "Menor"];
        const FORMAS_CAGED_ORDEM = ["C", "A", "G", "E", "D"];
        const NOTAS_CROMATICAS = ["C", "C#", "D", "D#", "E", "F", "F#", "G", "G#", "A", "A#", "B"];
        const QUALIDADE_SUFIXOS = {
            "Maior": "",
            "Menor": "m"
        };
        const FORMAS_CAGED_RAIZ = {
            "C": "C",
            "A": "A",
            "G": "G",
            "E": "E",
            "D": "D"
        };

        // Elementos DOM
        const selectTom = document.getElementById("tomAcordeLookup");
        const selectQualidade = document.getElementById("qualidadeAcordeLookup");
        const selectForma = document.getElementById("formaAcordeLookup");
        const btnBuscar = document.getElementById("buscarAcordeCompleto");
        const detalhesDiv = document.getElementById("detalhesAcordeCompleto");
        const tabelaBody = document.querySelector("#tabelaDesenhosIDs tbody");

        // Função para transpor notas
        function transporNotas(notasBase, tomAlvo) {
            const indiceTom = NOTAS_CROMATICAS.indexOf(tomAlvo);
            if (indiceTom === -1) return notasBase;
            
            return notasBase.map(nota => {
                const indiceOriginal = NOTAS_CROMATICAS.indexOf(nota.replace(/[#b]/, ""));
                if (indiceOriginal === -1) return nota;
                
                const novoIndice = (indiceOriginal + indiceTom) % NOTAS_CROMATICAS.length;
                return NOTAS_CROMATICAS[novoIndice];
            });
        }

        // Preencher seletores
        function preencherSeletores() {
            NOTAS_CROMATICAS.forEach(nota => {
                const option = document.createElement("option");
                option.value = nota;
                option.textContent = nota;
                selectTom.appendChild(option);
            });

            QUALIDADES_ORDEM.forEach(qualidade => {
                const option = document.createElement("option");
                option.value = qualidade;
                option.textContent = qualidade;
                selectQualidade.appendChild(option);
            });

            FORMAS_CAGED_ORDEM.forEach(forma => {
                const option = document.createElement("option");
                option.value = forma;
                option.textContent = forma;
                selectForma.appendChild(option);
            });
        }

        // Gerar tabela de referência
        function gerarTabelaReferencia() {
            tabelaBody.innerHTML = '';
            
            QUALIDADES_ORDEM.forEach((qualidade, qIdx) => {
                const row = document.createElement("tr");
                const cellQual = document.createElement("td");
                cellQual.textContent = qualidade;
                cellQual.className = "header-cell";
                row.appendChild(cellQual);
                
                FORMAS_CAGED_ORDEM.forEach((forma, fIdx) => {
                    const cell = document.createElement("td");
                    cell.textContent = (qIdx * FORMAS_CAGED_ORDEM.length) + fIdx + 1;
                    row.appendChild(cell);
                });
                
                tabelaBody.appendChild(row);
            });
        }

        // Gerar todos os acordes tocáveis
        const acordesTocaveis = [];
        function gerarAcordesTocaveis() {
            acordesTocaveis.length = 0;
            let id = 1;
            
            desenhosAcordes.forEach(desenho => {
                const notaRaizForma = FORMAS_CAGED_RAIZ[desenho.forma_caged];
                const indiceRaiz = NOTAS_CROMATICAS.indexOf(notaRaizForma);
                
                NOTAS_CROMATICAS.forEach(tom => {
                    const indiceTom = NOTAS_CROMATICAS.indexOf(tom);
                    const semitons = (indiceTom - indiceRaiz + 12) % 12;
                    const casaPestana = desenho.casa_pestana_base + semitons;
                    
                    acordesTocaveis.push({
                        id: id++,
                        id_desenho: desenho.id,
                        tom: tom,
                        qualidade: desenho.qualidade,
                        forma_caged: desenho.forma_caged,
                        nome: `${tom}${QUALIDADE_SUFIXOS[desenho.qualidade]} (${desenho.forma_caged})`,
                        desenho: desenho.desenho_string,
                        notas: transporNotas(desenho.notas_base, tom),
                        intervalos: desenho.intervalos,
                        dicas: desenho.dicas,
                        casa_pestana: casaPestana,
                        tem_pestana: casaPestana > 0
                    });
                });
            });
        }

        // Desenhar diagrama do acorde
        function desenharDiagramaAcorde(desenho, casaPestana) {
            const container = document.getElementById("diagramaAcordeContainer");
            container.innerHTML = '<div class="diagrama-titulo">Diagrama do Acorde</div>';
            
            // Configurações
            const numCordas = 6;
            const numCasas = 4;
            const largura = 250;
            const altura = 180;
            const padding = 25;
            const espacoCordas = (largura - 2 * padding) / (numCordas - 1);
            const espacoCasas = (altura - 2 * padding) / numCasas;
            
            // Criar SVG
            const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
            svg.setAttribute("width", "100%");
            svg.setAttribute("height", "100%");
            svg.setAttribute("viewBox", `0 0 ${largura} ${altura}`);
            svg.classList.add("diagrama-svg");
            
            // Desenhar trastes
            for (let i = 0; i <= numCasas; i++) {
                const y = padding + (i * espacoCasas);
                const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
                line.setAttribute("x1", padding);
                line.setAttribute("y1", y);
                line.setAttribute("x2", largura - padding);
                line.setAttribute("y2", y);
                line.setAttribute("stroke", "#555");
                line.setAttribute("stroke-width", i === 0 ? "2" : "1");
                svg.appendChild(line);
            }
            
            // Desenhar cordas
            for (let i = 0; i < numCordas; i++) {
                const x = padding + (i * espacoCordas);
                const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
                line.setAttribute("x1", x);
                line.setAttribute("y1", padding);
                line.setAttribute("x2", x);
                line.setAttribute("y2", altura - padding);
                line.setAttribute("stroke", "#555");
                line.setAttribute("stroke-width", i === 0 || i === 5 ? "3" : "2");
                svg.appendChild(line);
            }
            
            // Desenhar pestana/nut
            if (casaPestana === 0) {
                // Nut
                const nut = document.createElementNS("http://www.w3.org/2000/svg", "rect");
                nut.setAttribute("x", padding);
                nut.setAttribute("y", padding - 3);
                nut.setAttribute("width", largura - 2 * padding);
                nut.setAttribute("height", "6");
                nut.setAttribute("fill", "#333");
                svg.appendChild(nut);
            } else if (casaPestana > 0) {
                // Número da casa
                const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
                text.setAttribute("x", largura - padding + 10);
                text.setAttribute("y", padding + espacoCasas / 2 + 5);
                text.setAttribute("fill", "#333");
                text.setAttribute("font-size", "12");
                text.textContent = casaPestana;
                svg.appendChild(text);
            }
            
            // Processar cada corda (6ª para 1ª)
            for (let i = 0; i < numCordas; i++) {
                const corda = 5 - i; // Inverter a ordem (6ª corda primeiro)
                const fret = desenho[corda];
                const x = padding + (i * espacoCordas);
                
                if (fret === 'x') {
                    // Corda não tocada
                    const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
                    text.setAttribute("x", x);
                    text.setAttribute("y", padding - 8);
                    text.setAttribute("text-anchor", "middle");
                    text.setAttribute("fill", "red");
                    text.setAttribute("font-size", "14");
                    text.textContent = "X";
                    svg.appendChild(text);
                } else if (fret === '0') {
                    // Corda solta
                    const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
                    circle.setAttribute("cx", x);
                    circle.setAttribute("cy", padding - 8);
                    circle.setAttribute("r", "6");
                    circle.setAttribute("fill", "none");
                    circle.setAttribute("stroke", "blue");
                    circle.setAttribute("stroke-width", "1.5");
                    svg.appendChild(circle);
                } else {
                    // Nota pressionada
                    const fretNum = parseInt(fret, 10);
                    if (fretNum > 0) {
                        const y = padding + ((fretNum - (casaPestana || 0)) * espacoCasas) - (espacoCasas / 2);
                        const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
                        circle.setAttribute("cx", x);
                        circle.setAttribute("cy", y);
                        circle.setAttribute("r", "8");
                        circle.setAttribute("fill", "#3498db");
                        svg.appendChild(circle);
                    }
                }
            }
            
            container.appendChild(svg);
        }

        // Buscar acorde
        function buscarAcorde() {
            const tom = selectTom.value;
            const qualidade = selectQualidade.value;
            const forma = selectForma.value;
            
            const qIdx = QUALIDADES_ORDEM.indexOf(qualidade);
            const fIdx = FORMAS_CAGED_ORDEM.indexOf(forma);
            
            if (qIdx === -1 || fIdx === -1) {
                detalhesDiv.innerHTML = "<p>Selecione uma qualidade e forma válidas.</p>";
                return;
            }
            
            const idDesenho = (qIdx * FORMAS_CAGED_ORDEM.length) + fIdx + 1;
            const acorde = acordesTocaveis.find(a => 
                a.id_desenho === idDesenho && a.tom === tom
            );
            
            if (acorde) {
                let pestanaInfo = acorde.tem_pestana 
                    ? `<p><strong>Pestana:</strong> Casa ${acorde.casa_pestana}</p>`
                    : "<p><strong>Pestana:</strong> Não aplicável (posição aberta)</p>";
                
                detalhesDiv.innerHTML = `
                    <h3>${acorde.nome}</h3>
                    <p><strong>Tom:</strong> ${acorde.tom}</p>
                    <p><strong>Qualidade:</strong> ${acorde.qualidade}</p>
                    <p><strong>Forma CAGED:</strong> ${acorde.forma_caged}</p>
                    ${pestanaInfo}
                    <p><strong>Digitação:</strong> <code>${acorde.desenho}</code> (6ª à 1ª corda)</p>
                    <p><strong>Notas:</strong> ${acorde.notas.join(", ")}</p>
                    <p><strong>Intervalos:</strong> ${acorde.intervalos.join(", ")}</p>
                    <p><strong>Dicas:</strong> ${acorde.dicas}</p>
                `;
                
                desenharDiagramaAcorde(acorde.desenho, acorde.casa_pestana);
            } else {
                detalhesDiv.innerHTML = "<p>Acorde não encontrado. Verifique os parâmetros selecionados.</p>";
            }
        }

        // Inicialização
        document.addEventListener("DOMContentLoaded", () => {
            preencherSeletores();
            gerarTabelaReferencia();
            gerarAcordesTocaveis();
            
            // Selecionar valores padrão
            selectTom.selectedIndex = 0;
            selectQualidade.selectedIndex = 0;
            selectForma.selectedIndex = 0;
            
            // Buscar acorde inicial
            buscarAcorde();
        });

        // Event listeners
        btnBuscar.addEventListener("click", buscarAcorde);
        selectTom.addEventListener("change", buscarAcorde);
        selectQualidade.addEventListener("change", buscarAcorde);
        selectForma.addEventListener("change", buscarAcorde);
    </script>
</body>
</html><!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catálogo de Acordes para Violão</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        header {
            background-color: #2c3e50;
            color: white;
            padding: 15px 0;
            text-align: center;
            margin-bottom: 30px;
            border-radius: 5px;
        }
        main {
            max-width: 900px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        section {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        .controls {
            margin-bottom: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
        }
        .controls label {
            font-weight: bold;
        }
        .controls select, .controls button {
            padding: 8px 12px;
            border-radius: 4px;
            border: 1px solid #ddd;
            font-size: 16px;
        }
        .controls button {
            background-color: #3498db;
            color: white;
            cursor: pointer;
            border: none;
            transition: background-color 0.3s;
        }
        .controls button:hover {
            background-color: #2980b9;
        }
        #detalhesAcordeCompleto {
            border: 1px solid #ddd;
            padding: 20px;
            border-radius: 8px;
            background-color: #f9f9f9;
            margin-top: 20px;
        }
        #detalhesAcordeCompleto h3 {
            margin-top: 0;
            color: #2c3e50;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        #detalhesAcordeCompleto p {
            margin: 10px 0;
        }
        #detalhesAcordeCompleto strong {
            color: #2c3e50;
        }
        code {
            background-color: #eef;
            padding: 2px 5px;
            border-radius: 3px;
            font-family: monospace;
        }
        .table-container {
            overflow-x: auto;
            margin-top: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        table th, table td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: center;
        }
        table th {
            background-color: #f2f2f2;
            font-weight: bold;
        }
        table td.header-cell {
            background-color: #f2f2f2;
            font-weight: bold;
            text-align: left;
        }
        .acorde-lookup-area {
            margin-top: 30px;
        }
        footer {
            text-align: center;
            padding: 20px;
            margin-top: 30px;
            color: #7f8c8d;
            font-size: 0.9em;
        }
        #diagramaAcordeContainer {
            margin: 25px auto;
            width: 100%;
            max-width: 300px;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .diagrama-titulo {
            text-align: center;
            font-weight: bold;
            margin-bottom: 15px;
            color: #2c3e50;
        }
        .diagrama-svg {
            display: block;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <header>
        <h1>Catálogo Completo de Acordes para Violão</h1>
    </header>

    <main>
        <section class="acorde-lookup-area">
            <h2>Buscar Acorde</h2>
            <div class="controls">
                <label for="tomAcordeLookup">Tom:</label>
                <select id="tomAcordeLookup"></select>

                <label for="qualidadeAcordeLookup">Qualidade:</label>
                <select id="qualidadeAcordeLookup"></select>

                <label for="formaAcordeLookup">Forma CAGED:</label>
                <select id="formaAcordeLookup"></select>

                <button id="buscarAcordeCompleto">Buscar Acorde</button>
            </div>
            <div id="detalhesAcordeCompleto">
                <p>Selecione um tom, qualidade e forma para visualizar o acorde.</p>
                <div id="diagramaAcordeContainer"></div>
            </div>
        </section>

        <section class="table-area">
            <h2>Tabela de Referência (Formas CAGED)</h2>
            <div class="table-container">
                <table id="tabelaDesenhosIDs">
                    <thead>
                        <tr>
                            <th>Qualidade \ Forma</th>
                            <th>C</th>
                            <th>A</th>
                            <th>G</th>
                            <th>E</th>
                            <th>D</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2023 Catálogo de Acordes para Violão</p>
    </footer>

    <script>
        // Estrutura de dados para os desenhos de acordes
        const desenhosAcordes = [
            // Maior (IDs 1-5)
            {
                id: 1,
                qualidade: "Maior",
                forma_caged: "C",
                desenho_string: "x32010",
                notas_base: ["C", "E", "G"],
                intervalos: ["1", "3M", "5J"],
                dicas: "Dedo 3 na 5ª corda (casa 3), Dedo 2 na 4ª corda (casa 2), Dedo 1 na 2ª corda (casa 1). Não tocar a 6ª corda.",
                casa_pestana_base: 0
            },
            {
                id: 2,
                qualidade: "Maior",
                forma_caged: "A",
                desenho_string: "x02220",
                notas_base: ["A", "C#", "E"],
                intervalos: ["1", "3M", "5J"],
                dicas: "Dedos 2, 3 e 4 nas cordas 4, 3 e 2 (casa 2). Cuidado para não abafar a 1ª corda.",
                casa_pestana_base: 0
            },
            {
                id: 3,
                qualidade: "Maior",
                forma_caged: "G",
                desenho_string: "320003",
                notas_base: ["G", "B", "D"],
                intervalos: ["1", "3M", "5J"],
                dicas: "Dedo 3 na 6ª corda (casa 3), Dedo 2 na 5ª corda (casa 2), Dedo 4 na 1ª corda (casa 3).",
                casa_pestana_base: 0
            },
            {
                id: 4,
                qualidade: "Maior",
                forma_caged: "E",
                desenho_string: "022100",
                notas_base: ["E", "G#", "B"],
                intervalos: ["1", "3M", "5J"],
                dicas: "Dedo 2 na 5ª corda (casa 2), Dedo 3 na 4ª corda (casa 2), Dedo 1 na 3ª corda (casa 1).",
                casa_pestana_base: 0
            },
            {
                id: 5,
                qualidade: "Maior",
                forma_caged: "D",
                desenho_string: "xx0232",
                notas_base: ["D", "F#", "A"],
                intervalos: ["1", "3M", "5J"],
                dicas: "Não tocar as cordas 5 e 6. Dedo 1 na 3ª corda (casa 2), Dedo 3 na 2ª corda (casa 3), Dedo 2 na 1ª corda (casa 2).",
                casa_pestana_base: 0
            },

            // Menor (IDs 6-10)
            {
                id: 6,
                qualidade: "Menor",
                forma_caged: "C",
                desenho_string: "x35543",
                notas_base: ["C", "Eb", "G"],
                intervalos: ["1", "3m", "5J"],
                dicas: "Pestana com dedo 1 na casa 3 (corda 5). Formato da forma Am.",
                casa_pestana_base: 3
            },
            {
                id: 7,
                qualidade: "Menor",
                forma_caged: "A",
                desenho_string: "x02210",
                notas_base: ["A", "C", "E"],
                intervalos: ["1", "3m", "5J"],
                dicas: "Dedo 2 na 4ª corda (casa 2), Dedo 3 na 3ª corda (casa 2), Dedo 1 na 2ª corda (casa 1).",
                casa_pestana_base: 0
            },
            {
                id: 8,
                qualidade: "Menor",
                forma_caged: "G",
                desenho_string: "355333",
                notas_base: ["G", "Bb", "D"],
                intervalos: ["1", "3m", "5J"],
                dicas: "Pestana na casa 3. Formato da forma Em.",
                casa_pestana_base: 3
            },
            {
                id: 9,
                qualidade: "Menor",
                forma_caged: "E",
                desenho_string: "022000",
                notas_base: ["E", "G", "B"],
                intervalos: ["1", "3m", "5J"],
                dicas: "Dedo 2 na 5ª corda (casa 2), Dedo 3 na 4ª corda (casa 2). Cordas 1, 2, 3 e 6 soltas.",
                casa_pestana_base: 0
            },
            {
                id: 10,
                qualidade: "Menor",
                forma_caged: "D",
                desenho_string: "xx0231",
                notas_base: ["D", "F", "A"],
                intervalos: ["1", "3m", "5J"],
                dicas: "Não tocar cordas 5 e 6. Dedo 1 na 1ª corda (casa 1), Dedo 2 na 3ª corda (casa 2), Dedo 3 na 2ª corda (casa 3).",
                casa_pestana_base: 0
            }
        ];

        // Listas de referência
        const QUALIDADES_ORDEM = ["Maior", "Menor"];
        const FORMAS_CAGED_ORDEM = ["C", "A", "G", "E", "D"];
        const NOTAS_CROMATICAS = ["C", "C#", "D", "D#", "E", "F", "F#", "G", "G#", "A", "A#", "B"];
        const QUALIDADE_SUFIXOS = {
            "Maior": "",
            "Menor": "m"
        };
        const FORMAS_CAGED_RAIZ = {
            "C": "C",
            "A": "A",
            "G": "G",
            "E": "E",
            "D": "D"
        };

        // Elementos DOM
        const selectTom = document.getElementById("tomAcordeLookup");
        const selectQualidade = document.getElementById("qualidadeAcordeLookup");
        const selectForma = document.getElementById("formaAcordeLookup");
        const btnBuscar = document.getElementById("buscarAcordeCompleto");
        const detalhesDiv = document.getElementById("detalhesAcordeCompleto");
        const tabelaBody = document.querySelector("#tabelaDesenhosIDs tbody");

        // Função para transpor notas
        function transporNotas(notasBase, tomAlvo) {
            const indiceTom = NOTAS_CROMATICAS.indexOf(tomAlvo);
            if (indiceTom === -1) return notasBase;
            
            return notasBase.map(nota => {
                const indiceOriginal = NOTAS_CROMATICAS.indexOf(nota.replace(/[#b]/, ""));
                if (indiceOriginal === -1) return nota;
                
                const novoIndice = (indiceOriginal + indiceTom) % NOTAS_CROMATICAS.length;
                return NOTAS_CROMATICAS[novoIndice];
            });
        }

        // Preencher seletores
        function preencherSeletores() {
            NOTAS_CROMATICAS.forEach(nota => {
                const option = document.createElement("option");
                option.value = nota;
                option.textContent = nota;
                selectTom.appendChild(option);
            });

            QUALIDADES_ORDEM.forEach(qualidade => {
                const option = document.createElement("option");
                option.value = qualidade;
                option.textContent = qualidade;
                selectQualidade.appendChild(option);
            });

            FORMAS_CAGED_ORDEM.forEach(forma => {
                const option = document.createElement("option");
                option.value = forma;
                option.textContent = forma;
                selectForma.appendChild(option);
            });
        }

        // Gerar tabela de referência
        function gerarTabelaReferencia() {
            tabelaBody.innerHTML = '';
            
            QUALIDADES_ORDEM.forEach((qualidade, qIdx) => {
                const row = document.createElement("tr");
                const cellQual = document.createElement("td");
                cellQual.textContent = qualidade;
                cellQual.className = "header-cell";
                row.appendChild(cellQual);
                
                FORMAS_CAGED_ORDEM.forEach((forma, fIdx) => {
                    const cell = document.createElement("td");
                    cell.textContent = (qIdx * FORMAS_CAGED_ORDEM.length) + fIdx + 1;
                    row.appendChild(cell);
                });
                
                tabelaBody.appendChild(row);
            });
        }

        // Gerar todos os acordes tocáveis
        const acordesTocaveis = [];
        function gerarAcordesTocaveis() {
            acordesTocaveis.length = 0;
            let id = 1;
            
            desenhosAcordes.forEach(desenho => {
                const notaRaizForma = FORMAS_CAGED_RAIZ[desenho.forma_caged];
                const indiceRaiz = NOTAS_CROMATICAS.indexOf(notaRaizForma);
                
                NOTAS_CROMATICAS.forEach(tom => {
                    const indiceTom = NOTAS_CROMATICAS.indexOf(tom);
                    const semitons = (indiceTom - indiceRaiz + 12) % 12;
                    const casaPestana = desenho.casa_pestana_base + semitons;
                    
                    acordesTocaveis.push({
                        id: id++,
                        id_desenho: desenho.id,
                        tom: tom,
                        qualidade: desenho.qualidade,
                        forma_caged: desenho.forma_caged,
                        nome: `${tom}${QUALIDADE_SUFIXOS[desenho.qualidade]} (${desenho.forma_caged})`,
                        desenho: desenho.desenho_string,
                        notas: transporNotas(desenho.notas_base, tom),
                        intervalos: desenho.intervalos,
                        dicas: desenho.dicas,
                        casa_pestana: casaPestana,
                        tem_pestana: casaPestana > 0
                    });
                });
            });
        }

        // Desenhar diagrama do acorde
        function desenharDiagramaAcorde(desenho, casaPestana) {
            const container = document.getElementById("diagramaAcordeContainer");
            container.innerHTML = '<div class="diagrama-titulo">Diagrama do Acorde</div>';
            
            // Configurações
            const numCordas = 6;
            const numCasas = 4;
            const largura = 250;
            const altura = 180;
            const padding = 25;
            const espacoCordas = (largura - 2 * padding) / (numCordas - 1);
            const espacoCasas = (altura - 2 * padding) / numCasas;
            
            // Criar SVG
            const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
            svg.setAttribute("width", "100%");
            svg.setAttribute("height", "100%");
            svg.setAttribute("viewBox", `0 0 ${largura} ${altura}`);
            svg.classList.add("diagrama-svg");
            
            // Desenhar trastes
            for (let i = 0; i <= numCasas; i++) {
                const y = padding + (i * espacoCasas);
                const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
                line.setAttribute("x1", padding);
                line.setAttribute("y1", y);
                line.setAttribute("x2", largura - padding);
                line.setAttribute("y2", y);
                line.setAttribute("stroke", "#555");
                line.setAttribute("stroke-width", i === 0 ? "2" : "1");
                svg.appendChild(line);
            }
            
            // Desenhar cordas
            for (let i = 0; i < numCordas; i++) {
                const x = padding + (i * espacoCordas);
                const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
                line.setAttribute("x1", x);
                line.setAttribute("y1", padding);
                line.setAttribute("x2", x);
                line.setAttribute("y2", altura - padding);
                line.setAttribute("stroke", "#555");
                line.setAttribute("stroke-width", i === 0 || i === 5 ? "3" : "2");
                svg.appendChild(line);
            }
            
            // Desenhar pestana/nut
            if (casaPestana === 0) {
                // Nut
                const nut = document.createElementNS("http://www.w3.org/2000/svg", "rect");
                nut.setAttribute("x", padding);
                nut.setAttribute("y", padding - 3);
                nut.setAttribute("width", largura - 2 * padding);
                nut.setAttribute("height", "6");
                nut.setAttribute("fill", "#333");
                svg.appendChild(nut);
            } else if (casaPestana > 0) {
                // Número da casa
                const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
                text.setAttribute("x", largura - padding + 10);
                text.setAttribute("y", padding + espacoCasas / 2 + 5);
                text.setAttribute("fill", "#333");
                text.setAttribute("font-size", "12");
                text.textContent = casaPestana;
                svg.appendChild(text);
            }
            
            // Processar cada corda (6ª para 1ª)
            for (let i = 0; i < numCordas; i++) {
                const corda = 5 - i; // Inverter a ordem (6ª corda primeiro)
                const fret = desenho[corda];
                const x = padding + (i * espacoCordas);
                
                if (fret === 'x') {
                    // Corda não tocada
                    const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
                    text.setAttribute("x", x);
                    text.setAttribute("y", padding - 8);
                    text.setAttribute("text-anchor", "middle");
                    text.setAttribute("fill", "red");
                    text.setAttribute("font-size", "14");
                    text.textContent = "X";
                    svg.appendChild(text);
                } else if (fret === '0') {
                    // Corda solta
                    const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
                    circle.setAttribute("cx", x);
                    circle.setAttribute("cy", padding - 8);
                    circle.setAttribute("r", "6");
                    circle.setAttribute("fill", "none");
                    circle.setAttribute("stroke", "blue");
                    circle.setAttribute("stroke-width", "1.5");
                    svg.appendChild(circle);
                } else {
                    // Nota pressionada
                    const fretNum = parseInt(fret, 10);
                    if (fretNum > 0) {
                        const y = padding + ((fretNum - (casaPestana || 0)) * espacoCasas) - (espacoCasas / 2);
                        const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
                        circle.setAttribute("cx", x);
                        circle.setAttribute("cy", y);
                        circle.setAttribute("r", "8");
                        circle.setAttribute("fill", "#3498db");
                        svg.appendChild(circle);
                    }
                }
            }
            
            container.appendChild(svg);
        }

        // Buscar acorde
        function buscarAcorde() {
            const tom = selectTom.value;
            const qualidade = selectQualidade.value;
            const forma = selectForma.value;
            
            const qIdx = QUALIDADES_ORDEM.indexOf(qualidade);
            const fIdx = FORMAS_CAGED_ORDEM.indexOf(forma);
            
            if (qIdx === -1 || fIdx === -1) {
                detalhesDiv.innerHTML = "<p>Selecione uma qualidade e forma válidas.</p>";
                return;
            }
            
            const idDesenho = (qIdx * FORMAS_CAGED_ORDEM.length) + fIdx + 1;
            const acorde = acordesTocaveis.find(a => 
                a.id_desenho === idDesenho && a.tom === tom
            );
            
            if (acorde) {
                let pestanaInfo = acorde.tem_pestana 
                    ? `<p><strong>Pestana:</strong> Casa ${acorde.casa_pestana}</p>`
                    : "<p><strong>Pestana:</strong> Não aplicável (posição aberta)</p>";
                
                detalhesDiv.innerHTML = `
                    <h3>${acorde.nome}</h3>
                    <p><strong>Tom:</strong> ${acorde.tom}</p>
                    <p><strong>Qualidade:</strong> ${acorde.qualidade}</p>
                    <p><strong>Forma CAGED:</strong> ${acorde.forma_caged}</p>
                    ${pestanaInfo}
                    <p><strong>Digitação:</strong> <code>${acorde.desenho}</code> (6ª à 1ª corda)</p>
                    <p><strong>Notas:</strong> ${acorde.notas.join(", ")}</p>
                    <p><strong>Intervalos:</strong> ${acorde.intervalos.join(", ")}</p>
                    <p><strong>Dicas:</strong> ${acorde.dicas}</p>
                `;
                
                desenharDiagramaAcorde(acorde.desenho, acorde.casa_pestana);
            } else {
                detalhesDiv.innerHTML = "<p>Acorde não encontrado. Verifique os parâmetros selecionados.</p>";
            }
        }

        // Inicialização
        document.addEventListener("DOMContentLoaded", () => {
            preencherSeletores();
            gerarTabelaReferencia();
            gerarAcordesTocaveis();
            
            // Selecionar valores padrão
            selectTom.selectedIndex = 0;
            selectQualidade.selectedIndex = 0;
            selectForma.selectedIndex = 0;
            
            // Buscar acorde inicial
            buscarAcorde();
        });

        // Event listeners
        btnBuscar.addEventListener("click", buscarAcorde);
        selectTom.addEventListener("change", buscarAcorde);
        selectQualidade.addEventListener("change", buscarAcorde);
        selectForma.addEventListener("change", buscarAcorde);
    </script>
</body>
</html>
