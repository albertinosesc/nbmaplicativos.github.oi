
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Gerador de Lista JS</title>
</head>
<style>
   p4{
    font-size: 24px;
  }
</style>
<body>
<p4><a href="../alunos/Lista_Geral_Arquivo/Lista_Geral_Arquivo.html" class="voltar-link">← Home</a></p4>

<h1>Gerador de Lista de TextBlocks</h1>
<button onclick="selecionarPasta()">Selecionar Pasta</button>

<h2>Abordagem</h2>
<pre id="saidaAbordagem"></pre>

<h2>Texto</h2>
<pre id="saidaTexto"></pre>

<h2>Música</h2>
<pre id="saidaMusica"></pre>

<script>
async function selecionarPasta() {
  const pasta = await window.showDirectoryPicker();

  const listaAbordagem = [];
  const listaTexto = [];
  const listaMusica = [];

  for await (const entry of pasta.values()) {
    if (entry.kind === 'file' && entry.name.endsWith('.js')) {
      const file = await entry.getFile();
      const texto = await file.text();

      // Captura id e título dentro do conteúdo
      const idMatch = texto.match(/id:\s*["'](.*?)["']/);
      const titleMatch = texto.match(/<h2>(.*?)<\/h2>/);

      if (idMatch && titleMatch) {
        const id = idMatch[1];  
        const titulo = titleMatch[1];

        if (id.startsWith('abord')) {
          listaAbordagem.push({ name: titulo, link: `abordagem.html#${id}` });
        } else if (id.startsWith('text')) {
          listaTexto.push({ name: titulo, link: `text.html#${id}` });
        } else if (id.startsWith('music')) {
          listaMusica.push({ name: titulo, link: `music.html#${id}` });
        }
      }
    }
  }

  gerarCodigoJS(listaAbordagem, 'saidaAbordagem');
  gerarCodigoJS(listaTexto, 'saidaTexto');
  gerarCodigoJS(listaMusica, 'saidaMusica');
}

function gerarCodigoJS(lista, elementoId) {
  const linhas = lista.map(item => {
    return `{ name: "${item.name}", link: "${item.link}" },`;
  });

  const codigo = linhas.join('\n');
  document.getElementById(elementoId).textContent = codigo;
}

</script>

</body>
</html>
